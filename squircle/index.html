<html>
<head><title>Squircle</title></head>
<body>
<form>
<input id="size" type="range" min="0" value="4" max="40" step="0.5" />
</form>
<canvas id="canvas" width="500" height="500" />

<script>
var canvas = document.getElementById('canvas');
var ctx = canvas.getContext('2d');

var a = 240;
var b = 240;
var n = 4;


var sizer = document.getElementById('size');
sizer.oninput = function() {
  n = 2 + Math.pow(sizer.value / 10, 4)
  draw();
}

function draw() {
  ctx.clearRect(0, 0, 500, 500);
  ctx.beginPath();
  ctx.moveTo(250 + 240,250);
  for (var i=0; i<=100; i++) {
    var t = 2*Math.PI * (i/100)
    var x = Math.pow(Math.abs(Math.cos(t)), 2/n) * a * Math.sign(Math.cos(t))
    var y = Math.pow(Math.abs(Math.sin(t)), 2/n) * b * Math.sign(Math.sin(t))

    ctx.lineTo(x+250,y+250);
  }
  ctx.lineTo(250 + 240, 250);
  ctx.stroke();
}

draw();
</script>
